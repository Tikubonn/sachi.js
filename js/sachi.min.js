/*
 (c) 2019 tikubonn.
 sachi.js has released under the MIT License.
*/
function g(f){var e=0;return function(){return e<f.length?{done:!1,value:f[e++]}:{done:!0}}}function n(f){var e="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return e?e.call(f):{next:g(f)}}
(function(f){function e(){this.data=[];this.table={}}function h(a){for(var c=[],b=0;b+1<a.length;b++)c.push(a.slice(b,b+2));return c}function p(a,c){var b=[];a=n(a);for(var d=a.next();!d.done;d=a.next())d=d.value,0<=c.indexOf(d)&&b.push(d);return b}function l(a){var c=[];a=n(a);for(var b=a.next();!b.done;b=a.next())b=b.value,-1==c.indexOf(b)&&c.push(b);return c}e.prototype.a=function(a){this.data.push(a);return this.data.length-1};e.prototype.g=function(a){var c=this.data.indexOf(a);return-1==c?this.a(a):
c};e.prototype.b=function(a,c){0==this.table.hasOwnProperty(a)&&(this.table[a]=[]);-1==this.table[a].indexOf(c)&&this.table[a].push(c)};e.prototype.f=function(a){return 1==this.table.hasOwnProperty(a)?this.table[a]:[]};e.prototype.addCandidate=function(a,c){c=this.g(c);a=h(a);a=n(a);for(var b=a.next();!b.done;b=a.next())this.b(b.value,c)};e.prototype.c=function(a){if(0==a.length)return[];for(var c=this.f(a[0]),b=1;b<a.length;b++)c=p(c,this.f(a[b]));return c.map(function(d){return this.data[d]},this)};
e.prototype.getCandidates=function(a){a=l(h(a));return this.c(a)};e.prototype.getCandidatesByWords=function(a){a=a.map(function(c){return h(c)});a=0==a.length?[]:l(a.reduce(function(c,b){return c.concat(b)}));return this.c(a)};e.prototype.clear=function(){this.data=[];this.table={}};e.prototype.dumpAsJSON=function(){return JSON.stringify({data:this.data,table:this.table})};e.prototype.loadFromJSON=function(a){var c=this.data.length;a=JSON.parse(a);if(1==a.hasOwnProperty("data"))for(var b=n(a.data),
d=b.next();!d.done;d=b.next())this.a(d.value);else throw Error('JSON data must have a member of "data".');if(1==a.hasOwnProperty("table"))for(b=n(Object.keys(a.table)),d=b.next();!d.done;d=b.next()){d=d.value;for(var m=n(a.table[d]),k=m.next();!k.done;k=m.next())this.b(d,k.value+c)}else throw Error('JSON data must have a member of "table".');};f.Sachi=e})(window);
